<div class="col col-12 col-md-10" style="box-shadow: rgba(0, 0, 0, 0.116) 1px 8px 24px;">

    <div class="conteudos">


        <% if((typeof explorar !== "undefined")){ %>
            <h4 class="mb-5">Explorar</h4>
        <% }else{ %>
            <div class="card mb-4" style="width: 700px;">
                <div class="card-header">
                    Me diga, o que vocÃª esta pensando?
                </div>
                <div class="card-body">
                    <form action="/c/create" method="post">
                        <textarea name="conteudo" id="conteudo" class="form-control"></textarea>
                        <button class="btn btn-outline-success form-control mt-1">Diga ao mundo</button>
                    </form>
                </div>
            </div>
        <% } %>

        <% conteudos.forEach(conteudo=>{ %>

            <% if(conteudo != null){ %>
                <div class="post card">
                    <div class="post-header">
                            <a class="link-info" href="/u/<%= conteudo.user.nick %>"><%= conteudo.user.nick %></a>
                    </div>
                    <div class="post-body">
                        <p><%= conteudo.body %></p>
                    </div>
                    <div class="post-footer">
                    <input id="conteudoId" type="hidden" value="<%= conteudo.id %>">
                    <input id="userId" type="hidden" value="<%= user.id %>">
    
                        <button class="btn btn-sm btn-outline-danger" onclick="like()">Like</button> 
                        <button class="btn btn-sm btn-outline-danger">Comentar</button> 
                    </div>
                </div>
            <% } %>

        <% }) %>

        
    </div>
    
</div>


<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script>


    function like(){
        let conteudoId = document.querySelector("#conteudoId").value;
        let userId = document.querySelector("#userId").value;

        let likeConteudo = {
            conteudoId,
            userId
        }
        if (conteudoId != undefined || conteudoId != '') {
            axios.post('http://localhost:8080/c/like',likeConteudo).then((response)=>{
                console.log(response);
                }).catch(err=>{
                    console.log(err);
                });

        }
    }

    


</script>